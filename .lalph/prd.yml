- id: TIM-99
  title: When you click on a timer it should show a drop-down
  description: |-
    Similar to the other menus in the app.

    The drop-down should contain the label, with actions to toggle the timer or dismiss it.

    Notes (Jan 19 2026): Timer UI currently lives in `src/Timers/TimerList.tsx` using `Tooltip` around a button that toggles/dismisses timers on click.
    Notes (Jan 19 2026): Replaced timer tooltip with a dropdown menu showing label, status, and actions to pause/resume or dismiss.
    Notes (Jan 19 2026): Dropdown label now shows only timer label; pause/resume action hidden once timer is completed.

    Notes (Jan 19 2026): Followed PR feedback to hide pause/resume once completed and keep label-only header (see `src/Timers/TimerList.tsx`).
  priority: 3
  estimate: null
  state: in-review
  blockedBy: []
  complete: true
  githubPrNumber: 37
- id: TIM-97
  title: Implement timer dock UI with existing timer state
  description: |-
    Spec: `.specs/recipe-step-timers.md`.

    Build the timer dock UI around the existing TimerList component and LiveStore timers.

    Steps:

    * Implement `TimerList` and `TimerCircle` in `src/Timers/TimerList.tsx` using circular progress rings and overflow handling.
    * Wire pause/resume to `toggleTimerAtom` and dismiss to `dismissTimerAtom`.
    * Render the dock near the AI chat floating button in `src/routes/__root.tsx` or `src/AiChat.tsx`.

    Notes (Jan 19 2026): `TimerList` and `TimerCircle` in `src/Timers/TimerList.tsx` are currently TODO placeholders; `timerUiStateAtom` in `src/Timers/atoms.ts` provides status, remaining, and progress for timers.
    Notes (Jan 19 2026): Timer dock UI implemented in `src/Timers/TimerList.tsx` using SVG progress rings, tooltip labels, pause/resume/dismiss actions, and +N overflow pill. Rendered `TimerList` above AI chat button in `src/AiChat.tsx`.
  priority: 3
  estimate: null
  state: done
  blockedBy: []
  complete: true
  githubPrNumber: null
- id: TIM-96
  title: Add timer state helpers for UI
  description: |-
    Spec: `.specs/recipe-step-timers.md`.

    Create derived timer state helpers based on the existing LiveStore timers.

    Steps:

    * Extend `src/Timers/atoms.ts` or `src/Timers/TimerList.tsx` with helpers for running/paused/completed timers using `pausedRemaining` and `remainingAt(now)`.
    * Add progress/remaining-time calculations for UI display without introducing new timer storage.
    * Ensure helpers use `nowAtom` from `src/atoms.ts` and keep computations lightweight.

    Notes (Jan 19 2026): Added `timerUiStateAtom` in `src/Timers/atoms.ts` deriving status, remaining, and progress from `nowAtom` and timers (no new storage).
  priority: 3
  estimate: null
  state: done
  blockedBy: []
  complete: true
  githubPrNumber: null
- id: TIM-95
  title: Fix some durations not being parsed
  description: |-
    Next step: Rebase PR and resolve merge conflicts.

    Spec: `.specs/recipe-step-timers.md`.

    The following are not working:

    * `1 minute`
    * `5-10 minutes` (use the lower bound)

    Test a few other patterns as well

    Notes (Jan 19 2026):

    * `parseStepDurations` qualifier regex is not optional, so plain durations like "1 minute" fail; fix optional qualifier grouping.
    * Range parsing currently uses the upper bound; task wants lower bound.
    * `durationRegex` fix: wrap qualifier in a non-capturing optional group `(?:${qualifierPattern})?` so single units and ranges match.
    * `parseDurationMs` now uses `rangeStart` (lower bound) for range durations per TIM-95.
  priority: 3
  estimate: null
  state: done
  blockedBy: []
  complete: true
  githubPrNumber: null
- id: TIM-92
  title: Parse and render step duration links
  description: |-
    Next step: Rebase PR and resolve merge conflicts.

    Spec: `.specs/recipe-step-timers.md`.

    Add duration parsing for recipe step text and render clickable duration links in `src/routes/recipes/$id.tsx` without disrupting step selection.

    Steps:

    * Create parsing helper in `src/lib/stepDurations.ts` to tokenize text into duration and non-duration segments.
    * Update `RecipeDetails` rendering to map segments and wire clicks to a start-timer handler with stopPropagation.
    * Ensure duration elements are keyboard accessible with aria labels and avoid parsing inside URLs.

    Notes: Recipe step text is currently rendered as plain `<p>` in `src/routes/recipes/$id.tsx` with step selection handled by parent `onClick`.
    Notes: Duration parsing lives in `src/lib/stepDurations.ts`, using regex to handle ranges, combined hours+minutes, and to skip URLs.
  priority: 3
  estimate: null
  state: done
  blockedBy: []
  complete: true
  githubPrNumber: null
- id: TIM-91
  title: Change the recipe basic info padding to 4 on Mobile
  description: "Notes: Updated recipe details basic info row to use p-4 on mobile."
  priority: 3
  estimate: null
  state: done
  blockedBy: []
  complete: true
  githubPrNumber: null
- id: TIM-77
  title: Don't hide note toggle button
  description: "Notes: Sticky note toggle stays visible for menu and meal plan
    days. Clicking saves and hides the note when open."
  priority: 3
  estimate: null
  state: done
  blockedBy: []
  complete: true
  githubPrNumber: null
- id: TIM-76
  title: Remove the padding underneath the notes textarea
  description: |-
    Notes: Removed the bottom padding under the meal plan day note textarea.

    Notes: Menus page already uses `pb-0` on the note wrapper.
  priority: 3
  estimate: null
  state: done
  blockedBy: []
  complete: true
  githubPrNumber: null
- id: TIM-75
  title: Copy menu day notes into meal plan
  description: |-
    Carry per-day notes when planning a menu.

    * Update `addMenuToMealPlanAtom` to read menu day notes
    * Create or update meal plan day notes for matching dates
    * Confirm menus without notes behave the same
    * Notes: Copies menu day notes into meal plan day notes on add.
  priority: 3
  estimate: null
  state: done
  blockedBy: []
  complete: true
  githubPrNumber: null
- id: TIM-74
  title: Add meal plan day notes UI
  description: |-
    Expose notes for each day in the weekly plan view.

    * Render and edit notes in `src/routes/plan.tsx` day headers
    * Persist note edits via meal plan day note events
    * Keep note styling consistent with day cards
    * Notes: Added meal plan day note textarea with add/update/remove events.
  priority: 3
  estimate: null
  state: done
  blockedBy: []
  complete: true
  githubPrNumber: null
- id: TIM-73
  title: Add menu day note editing UI
  description: |-
    Let users add and edit notes per menu day.

    * Display and edit notes in `src/routes/menus/$id.tsx` for each day
    * Persist note changes with menu day note events
    * Populate the note field when creating new day notes
    * Notes: Added menu day note storage and editing UI per menu day.
  priority: 3
  estimate: null
  state: done
  blockedBy: []
  complete: true
  githubPrNumber: null
- id: TIM-72
  title: Add menu and meal plan day note data models
  description: |-
    Store notes per day for menus and meal plans.

    * Add `menu_day_notes` and `meal_plan_day_notes` tables in `src/livestore/schema.ts`
    * Create models/schemas plus events for add/update/remove
    * Update queries to load day notes alongside menus and meal plan days
    * Ensure export/import paths include day notes
    * Notes: Added day note models, events, queries, and export/import coverage.
  priority: 3
  estimate: null
  state: done
  blockedBy: []
  complete: true
  githubPrNumber: null
