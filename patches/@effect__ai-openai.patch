diff --git a/dist/esm/Generated.js b/dist/esm/Generated.js
index 4651d56d4777d0d2662c7de45f7d4d37baf5559c..1c2defe6a6e5930dd08852b001bca1d01019a273 100644
--- a/dist/esm/Generated.js
+++ b/dist/esm/Generated.js
@@ -1527,9 +1527,7 @@ import*as HttpClientError from"@effect/platform/HttpClientError";import*as HttpC
  * Action type "search" - Performs a web search query.
  */export class WebSearchActionSearch extends/*#__PURE__*/S.Class("WebSearchActionSearch")({/**
      * The action type.
-     */"type":WebSearchActionSearchType,/**
-     * The search query.
-     */"query":S.String,/**
+     */"type":S.String,/**
      * The sources used in the search.
      */"sources":/*#__PURE__*/S.optionalWith(/*#__PURE__*/S.Array(/*#__PURE__*/S.Struct({/**
          * The type of source. Always `url`.
@@ -1543,17 +1541,17 @@ import*as HttpClientError from"@effect/platform/HttpClientError";import*as HttpC
      * The action type.
      */"type":WebSearchActionOpenPageType,/**
      * The URL opened by the model.
-     */"url":S.String}){}/**
+     */"url":S.optional(S.String)}){}/**
  * The action type.
  */export class WebSearchActionFindType extends/*#__PURE__*/S.Literal("find"){}/**
  * Action type "find": Searches for a pattern within a loaded page.
  */export class WebSearchActionFind extends/*#__PURE__*/S.Class("WebSearchActionFind")({/**
      * The action type.
-     */"type":WebSearchActionFindType,/**
+     */"type":S.String,/**
      * The URL of the page searched for the pattern.
-     */"url":S.String,/**
+     */"url":S.optional(S.String),/**
      * The pattern or text to search for within the page.
-     */"pattern":S.String}){}/**
+     */"pattern":S.optional(S.String)}){}/**
  * The results of a web search tool call. See the
  * [web search guide](https://platform.openai.com/docs/guides/tools-web-search) for more information.
  */export class WebSearchToolCall extends/*#__PURE__*/S.Class("WebSearchToolCall")({/**
@@ -1565,7 +1563,7 @@ import*as HttpClientError from"@effect/platform/HttpClientError";import*as HttpC
      */"status":WebSearchToolCallStatus,/**
      * An object describing the specific action taken in this web search call.
      * Includes details on how the model used the web (search, open_page, find).
-     */"action":/*#__PURE__*/S.Record({key:S.String,value:S.Unknown})}){}/**
+     */"action":/*#__PURE__*/S.optionalWith(S.Record({key:S.String,value:S.Unknown}), { default: () => ({}) })}){}/**
  * The type of the image generation call. Always `image_generation_call`.
  */export class ImageGenToolCallType extends/*#__PURE__*/S.Literal("image_generation_call"){}/**
  * The status of the image generation call.
@@ -5881,9 +5879,9 @@ import*as HttpClientError from"@effect/platform/HttpClientError";import*as HttpC
      * Unix timestamp (in seconds) of when this Response was created.
      */"created_at":S.Number,"error":/*#__PURE__*/S.NullOr(/*#__PURE__*/S.Struct({"code":ResponseErrorCode,/**
          * A human-readable description of the error.
-         */"message":S.String})),"incomplete_details":/*#__PURE__*/S.NullOr(/*#__PURE__*/S.Struct({/**
+         */"message":S.String})),"incomplete_details":/*#__PURE__*/S.optionalWith(/*#__PURE__*/S.Struct({/**
          * The reason why the response is incomplete.
-         */"reason":/*#__PURE__*/S.optionalWith(/*#__PURE__*/S.Literal("max_output_tokens","content_filter"),{nullable:true})})),/**
+         */"reason":/*#__PURE__*/S.optionalWith(/*#__PURE__*/S.Literal("max_output_tokens","content_filter"),{nullable:true})}), { nullable: true }),/**
      * An array of content items generated by the model.
      *
      * - The length and order of items in the `output` array is dependent
diff --git a/dist/esm/OpenAiClient.js b/dist/esm/OpenAiClient.js
index c65e55f47385218c2b9521df26c99c41bc31b2f8..f14ad960964a733dcea27689eb3f9ebaad478eb3 100644
--- a/dist/esm/OpenAiClient.js
+++ b/dist/esm/OpenAiClient.js
@@ -242,7 +242,7 @@ export class ResponseFailedEvent extends /*#__PURE__*/Schema.Class("@effect/ai-o
   /**
    * The response that failed.
    */
-  response: Generated.Response
+  response: Schema.Unknown
 }) {}
 /**
  * Emitted when a new output item is added.
@@ -1481,7 +1481,7 @@ export class ResponseErrorEvent extends /*#__PURE__*/Schema.Class("@effect/ai-op
   /**
    * The error message.
    */
-  message: Schema.String,
+  message: Schema.optionalWith(Schema.String, { nullable: true }),
   /**
    * The error parameter.
    */
diff --git a/dist/esm/OpenAiLanguageModel.js b/dist/esm/OpenAiLanguageModel.js
index 63b19f1035baef958a366b02bb2af99f74b848ed..5ae4d8a01e5d1c1b1d0fa4b282f2590b6d2bf1e7 100644
--- a/dist/esm/OpenAiLanguageModel.js
+++ b/dist/esm/OpenAiLanguageModel.js
@@ -268,15 +268,13 @@ const prepareMessages = /*#__PURE__*/Effect.fnUntraced(function* (options, confi
                 }
               case "tool-call":
                 {
-                  if (!part.providerExecuted) {
-                    messages.push({
-                      id: getItemId(part),
-                      type: "function_call",
-                      call_id: part.id,
-                      name: part.name,
-                      arguments: JSON.stringify(part.params)
-                    });
-                  }
+                  messages.push({
+                    id: getItemId(part),
+                    type: "function_call",
+                    call_id: part.id,
+                    name: part.name,
+                    arguments: JSON.stringify(part.params)
+                  });
                   break;
                 }
             }
